<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gestor de Tipificacion</title>
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="login.css" />
  <link rel="stylesheet" href="style-history.css" />
  <link rel="stylesheet" href="style-themes.css" />
  <link rel="stylesheet" href="style-genobs.css" />
  <link rel="stylesheet" href="style-survey-modal.css" />
  <link rel="stylesheet" href="style-survey-modal-persiste.css" />
  <link rel="stylesheet" href="style-pip.css" />
  <link rel="stylesheet" href="style-tmo-modal.css" />
  <link rel="stylesheet" href="style-alarm.css" />
  <link rel="stylesheet" href="style-templates.css" />
  <link rel="stylesheet" href="style-ai-template.css" />
  <link rel="stylesheet" href="preloader.css" />
  <link rel="stylesheet" href="style-log-modal.css" />
  <script>
    // Estilos Temas app//
    (function () {
      const themes = {
        tema_mundo: {
          "--bg-primary": "#0b3f4bff",
          "--bg-secondary": "#0b3f4bff",
          "--bg-tertiary": "#a19f0eff",
          "--text-primary": "#ffffffff",
          "--text-secondary": "#ffffffff",
          "--accent-primary": "#a19f0eff",
          "--accent-hover": "#ffa000",
          "--danger-color": "#ef4444",
          "--success-color": "#22c55e",
          "--icon-color": "#ffffffff",
          "--button-text-color": "#ffffffff",
          "--button-bg-color": "#ffda00",
          "--speedtest-url-color": "#ffffffff",
          "--logo-color": "#ffffffff",
          "--input-bg": "#f8feffff",
          "--input-border": "#ffffffff",
          "--input-text": "#000000ff",
          "--input-focus-border": "#ffffffff",
          "--input-focus-shadow": "rgba(255, 255, 255, 0.4)",
          "--input-focus-bg": "#a19f0eff",
          "--input-label-color": "#ffffffff",
          "--munfo-logo-path": "assets/mundo.svg",
          "--konecta-logo-path": "assets/konecta.svg",
        },
        dark_blue: {
          "--bg-primary": "#152533",
          "--bg-secondary": "#2a3b4c",
          "--bg-tertiary": "#405166",
          "--text-primary": "#e2e8f0",
          "--text-secondary": "#94a3b8",
          "--accent-primary": "#3b82f6",
          "--accent-hover": "#2563eb",
          "--danger-color": "#ef4444",
          "--success-color": "#22c55e",
          "--icon-color": "#e2e8f0",
          "--button-text-color": "#e2e8f0",
          "--button-bg-color": "#3b82f6",
          "--speedtest-url-color": "#3b82f6",
          "--logo-color": "#e2e8f0",
          "--input-bg": "#1e293b",
          "--input-border": "#3b82f6",
          "--input-text": "#e2e8f0",
          "--input-focus-border": "#3b82f6",
          "--input-focus-shadow": "rgba(59, 130, 246, 0.4)",
          "--input-focus-bg": "#405166",
          "--input-label-color": "#94a3b8",
          "--munfo-logo-path": "assets/munfo.svg",
          "--konecta-logo-path": "assets/konecta.svg",
        },
        modern_black: {
          "--bg-primary": "#000000",
          "--bg-secondary": "#1a1a1a",
          "--bg-tertiary": "#2d2d2d",
          "--text-primary": "#ffffff",
          "--text-secondary": "#b0b0b0",
          "--accent-primary": "#ffffff",
          "--accent-hover": "#e0e0e0",
          "--danger-color": "#ff4444",
          "--success-color": "#4ade80",
          "--icon-color": "#ffffff",
          "--button-text-color": "#000000",
          "--button-bg-color": "#ffffff",
          "--speedtest-url-color": "#ffffff",
          "--logo-color": "#ffffff",
          "--input-bg": "#1a1a1a",
          "--input-border": "#404040",
          "--input-text": "#ffffff",
          "--input-focus-border": "#ffffff",
          "--input-focus-shadow": "rgba(255, 255, 255, 0.3)",
          "--input-focus-bg": "#242424",
          "--input-label-color": "#b0b0b0",
          "--munfo-logo-path": "assets/munfo.svg",
          "--konecta-logo-path": "assets/konecta.svg",
        },
      };
      const defaultThemeName =
        localStorage.getItem("selectedTheme") || "tema_mundo";
      const theme = themes[defaultThemeName];
      if (theme) {
        for (const [key, value] of Object.entries(theme)) {
          document.documentElement.style.setProperty(key, value);
        }
        window.dispatchEvent(new Event("themeChanged"));
      }
    })();
  </script>
  <!-- Console Security Protection -->
  <script src="js/consoleSecurity.js"></script>
</head>

<body>
  <!-- Paramount-Style Preloader -->

  <div class="logo-container">
    <img src="assets/logo.svg" alt="Logo de Inicio de Sesión" style="max-width: 200px; height: auto" />
  </div>
  <script src="js/assetLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script type="module" src="js/body.js"></script>
  <script type="module" src="js/main.js"></script>
  <script type="module" src="js/speedtest.js"></script>
  <script type="module" src="js/alarm.js"></script>
  <script type="module" src="js/templates.js"></script>
  <script type="module" src="js/templateSearch.js"></script>
  <script src="js/templateSuggestion.js"></script>
  <script type="module" src="js/aiTemplateModal.js"></script>
  <!-- Configuración encriptada de URLs -->
  <script src="js/config.encrypted.js"></script>
  <script type="module">
    import { initializeConfig } from './js/configLoader.js';
    // Inicializar configuración de URLs desde archivo encriptado
    initializeConfig();
  </script>
  <script type="module">
    import { abrirModalTipificacion } from "./js/main.js";
    window.abrirModalTipificacion = abrirModalTipificacion;
  </script>
  <script type="module" src="js/logModal.js"></script>
  <!-- Modal Logs -->
  <div id="logModal" class="modal">
    <div class="modal-content log-modal-content">
      <div class="log-header-terminal">
        <span class="terminal-title">system_logs.log</span>
        <div class="terminal-actions">
          <button class="copy-terminal-btn" onclick="window.copyLogToClipboard()">
            <i class="material-icons">content_copy</i> Copiar
          </button>
          <button class="close-btn-terminal" onclick="window.closeLogModal()">×</button>
        </div>
      </div>
      <div id="log-terminal-body" class="terminal-body">
        <!-- Logs will be appended here as divs -->
      </div>
    </div>
  </div>

  <!-- Logout Confirmation Modal Container -->
  <div id="logoutModalContainer"></div>

  <!-- Observation Detail Modal Structure -->
  <div id="observationDetailModal" class="modal">
    <div class="modal-content">
      <span class="close-button material-icons" onclick="cerrarModal('observationDetailModal')">close</span>
      <h2>Detalle de Observación</h2>
      <div class="modal-body">
        <textarea id="observationDetailText" readonly></textarea>
      </div>
      <div class="modal-buttons">
        <button class="button"
          onclick="copyToClipboard(document.getElementById('observationDetailText').value); window.showNotification('Observación copiada al portapapeles', 'success');">
          Copiar
        </button>
      </div>
    </div>
  </div>

  <!-- Survey Persiste Modal Container -->
  <div id="surveyPersisteModalContainer"></div>

  <script type="module">
    import { createSurveyPersisteModal } from "./js/surveyPersisteModal.js";
    window.createSurveyPersisteModal = createSurveyPersisteModal;
  </script>
  <script type="module">
    import {
      buildSurveyPersisteUrl,
      construirYEnviarSondeoPersiste,
    } from "./js/surveyPersiste.js";
    window.buildSurveyPersisteUrl = buildSurveyPersisteUrl;
    window.construirYEnviarSondeoPersiste = construirYEnviarSondeoPersiste;
  </script>
</body>

</html>